var Gallery=function(){"use strict";function t(){}function n(t){return t()}function e(){return Object.create(null)}function o(t){t.forEach(n)}function i(t){return"function"==typeof t}function r(t,n){return t!=t?n==n:t!==n||t&&"object"==typeof t||"function"==typeof t}let l,c;function s(t,n){return l||(l=document.createElement("a")),l.href=n,t===l.href}function u(t,n){t.appendChild(n)}function a(t,n,e){t.insertBefore(n,e||null)}function f(t){t.parentNode.removeChild(t)}function h(t){return document.createElement(t)}function d(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function p(t){return document.createTextNode(t)}function m(){return p(" ")}function g(t,n,e,o){return t.addEventListener(n,e,o),()=>t.removeEventListener(n,e,o)}function $(t,n,e){null==e?t.removeAttribute(n):t.getAttribute(n)!==e&&t.setAttribute(n,e)}function v(t,n){n=""+n,t.wholeText!==n&&(t.data=n)}function _(t,n,e,o){t.style.setProperty(n,e,o?"important":"")}function w(t){c=t}function y(){if(!c)throw new Error("Function called outside component initialization");return c}function x(t){y().$$.on_mount.push(t)}const b=[],k=[],E=[],C=[],N=Promise.resolve();let A=!1;function M(t){E.push(t)}let z=!1;const O=new Set;function T(){if(!z){z=!0;do{for(let t=0;t<b.length;t+=1){const n=b[t];w(n),j(n.$$)}for(w(null),b.length=0;k.length;)k.pop()();for(let t=0;t<E.length;t+=1){const n=E[t];O.has(n)||(O.add(n),n())}E.length=0}while(b.length);for(;C.length;)C.pop()();A=!1,z=!1,O.clear()}}function j(t){if(null!==t.fragment){t.update(),o(t.before_update);const n=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,n),t.after_update.forEach(M)}}const B=new Set;let I;function L(){I={r:0,c:[],p:I}}function R(){I.r||o(I.c),I=I.p}function S(t,n){t&&t.i&&(B.delete(t),t.i(n))}function P(t,n,e,o){if(t&&t.o){if(B.has(t))return;B.add(t),I.c.push((()=>{B.delete(t),o&&(e&&t.d(1),o())})),t.o(n)}}function q(t){t&&t.c()}function F(t,e,r,l){const{fragment:c,on_mount:s,on_destroy:u,after_update:a}=t.$$;c&&c.m(e,r),l||M((()=>{const e=s.map(n).filter(i);u?u.push(...e):o(e),t.$$.on_mount=[]})),a.forEach(M)}function G(t,n){const e=t.$$;null!==e.fragment&&(o(e.on_destroy),e.fragment&&e.fragment.d(n),e.on_destroy=e.fragment=null,e.ctx=[])}function D(t,n){-1===t.$$.dirty[0]&&(b.push(t),A||(A=!0,N.then(T)),t.$$.dirty.fill(0)),t.$$.dirty[n/31|0]|=1<<n%31}function H(n,i,r,l,s,u,a,h=[-1]){const d=c;w(n);const p=n.$$={fragment:null,ctx:null,props:u,update:t,not_equal:s,bound:e(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(i.context||(d?d.$$.context:[])),callbacks:e(),dirty:h,skip_bound:!1,root:i.target||d.$$.root};a&&a(p.root);let m=!1;if(p.ctx=r?r(n,i.props||{},((t,e,...o)=>{const i=o.length?o[0]:e;return p.ctx&&s(p.ctx[t],p.ctx[t]=i)&&(!p.skip_bound&&p.bound[t]&&p.bound[t](i),m&&D(n,t)),e})):[],p.update(),m=!0,o(p.before_update),p.fragment=!!l&&l(p.ctx),i.target){if(i.hydrate){const t=function(t){return Array.from(t.childNodes)}(i.target);p.fragment&&p.fragment.l(t),t.forEach(f)}else p.fragment&&p.fragment.c();i.intro&&S(n.$$.fragment),F(n,i.target,i.anchor,i.customElement),T()}w(d)}class J{$destroy(){G(this,1),this.$destroy=t}$on(t,n){const e=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return e.push(n),()=>{const t=e.indexOf(n);-1!==t&&e.splice(t,1)}}$set(t){var n;this.$$set&&(n=t,0!==Object.keys(n).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function K(n){let e,o,r,l,c,d,p;return{c(){e=h("div"),o=h("div"),r=h("img"),$(r,"key",l="img-"+n[1]),s(r.src,c=n[0].thumbnail)||$(r,"src",c),$(r,"alt","todo"),$(r,"title","todo"),$(r,"style",n[4]),$(o,"class","tile-viewport"),$(o,"style",n[5]),$(e,"class","tile"),_(e,"margin",n[2]+"px")},m(t,l){a(t,e,l),u(e,o),u(o,r),d||(p=g(e,"click",(function(){i(n[3])&&n[3].apply(this,arguments)})),d=!0)},p(t,[i]){n=t,2&i&&l!==(l="img-"+n[1])&&$(r,"key",l),1&i&&!s(r.src,c=n[0].thumbnail)&&$(r,"src",c),16&i&&$(r,"style",n[4]),32&i&&$(o,"style",n[5]),4&i&&_(e,"margin",n[2]+"px")},i:t,o:t,d(t){t&&f(e),d=!1,p()}}}function Q(t,n,e){let o,i,{item:r}=n,{key:l}=n,{height:c}=n,{margin:s=0}=n,{onClick:u=function(){}}=n;return void 0!==r||console.warn("No item passed to the Image component"),void 0!==l||console.warn("No key passed to the Image component"),void 0!==c||console.warn("No height passed to the Image component"),t.$$set=t=>{"item"in t&&e(0,r=t.item),"key"in t&&e(1,l=t.key),"height"in t&&e(6,c=t.height),"margin"in t&&e(2,s=t.margin),"onClick"in t&&e(3,u=t.onClick)},t.$$.update=()=>{65&t.$$.dirty&&e(5,o=`\n        height: ${c}px;\n        width: ${r.grid_width}px;\n    `),65&t.$$.dirty&&e(4,i=`\n        height: ${c}px;\n        width: ${r.scaled_width}px;\n        margin-left: ${r.margin_left}px;\n    `)},[r,l,s,u,i,o,c]}class U extends J{constructor(t){super(),H(this,t,Q,K,r,{item:0,key:1,height:6,margin:2,onClick:3})}}function V(n){let e,o;return{c(){e=d("svg"),o=d("circle"),$(o,"class","path svelte-1s9f8zb"),$(o,"cx","25"),$(o,"cy","25"),$(o,"r","20"),$(o,"fill","none"),$(o,"stroke-width","5"),$(e,"class","spinner svelte-1s9f8zb"),$(e,"viewBox","0 0 50 50")},m(t,n){a(t,e,n),u(e,o)},p:t,i:t,o:t,d(t){t&&f(e)}}}class W extends J{constructor(t){super(),H(this,t,null,V,r,{})}}function X(t){let n,e,o;return{c(){n=h("div"),n.textContent="❮",$(n,"class","prev svelte-tfd88v")},m(r,l){a(r,n,l),e||(o=g(n,"click",(function(){i(t[3])&&t[3].apply(this,arguments)})),e=!0)},p(n,e){t=n},d(t){t&&f(n),e=!1,o()}}}function Y(t){let n,e,o;return{c(){n=h("div"),n.textContent="❯",$(n,"class","next svelte-tfd88v")},m(r,l){a(r,n,l),e||(o=g(n,"click",(function(){i(t[4])&&t[4].apply(this,arguments)})),e=!0)},p(n,e){t=n},d(t){t&&f(n),e=!1,o()}}}function Z(t){let n,e;return n=new W({}),{c(){q(n.$$.fragment)},m(t,o){F(n,t,o),e=!0},i(t){e||(S(n.$$.fragment,t),e=!0)},o(t){P(n.$$.fragment,t),e=!1},d(t){G(n,t)}}}function tt(t){let n,e,o,i,r=t[7].length>0&&nt(t);return{c(){n=h("div"),e=h("div"),o=p(t[1]),i=m(),r&&r.c(),$(e,"class","caption svelte-tfd88v"),$(n,"class","caption-container svelte-tfd88v")},m(t,l){a(t,n,l),u(n,e),u(e,o),u(n,i),r&&r.m(n,null)},p(t,e){2&e&&v(o,t[1]),t[7].length>0?r?r.p(t,e):(r=nt(t),r.c(),r.m(n,null)):r&&(r.d(1),r=null)},d(t){t&&f(n),r&&r.d()}}}function nt(t){let n,e;return{c(){n=h("div"),e=p(t[7]),$(n,"class","pos")},m(t,o){a(t,n,o),u(n,e)},p(t,n){128&n&&v(e,t[7])},d(t){t&&f(n)}}}function et(t){let n,e,r,l,c,d,p,v,w,y,x,b,k,E,C=t[5]&&X(t),N=t[6]&&Y(t),A=!t[8]&&Z(),M=t[8]&&tt(t);return{c(){n=h("div"),e=h("span"),e.textContent="×",r=m(),C&&C.c(),l=m(),N&&N.c(),c=m(),d=h("div"),p=h("div"),A&&A.c(),v=m(),w=h("img"),x=m(),M&&M.c(),$(e,"class","close cursor svelte-tfd88v"),s(w.src,y=t[0])||$(w,"src",y),$(w,"alt",t[1]),$(w,"title",t[1]),_(w,"display",t[8]?"inherit":"none"),$(w,"class","svelte-tfd88v"),$(p,"class","modal-content svelte-tfd88v"),$(d,"class","modal-inner svelte-tfd88v"),$(n,"class","modal svelte-tfd88v")},m(o,s){a(o,n,s),u(n,e),u(n,r),C&&C.m(n,null),u(n,l),N&&N.m(n,null),u(n,c),u(n,d),u(d,p),A&&A.m(p,null),u(p,v),u(p,w),t[11](w),u(p,x),M&&M.m(p,null),b=!0,k||(E=[g(window,"keydown",t[10]),g(e,"click",(function(){i(t[2])&&t[2].apply(this,arguments)})),g(p,"click",(function(){i(t[4])&&t[4].apply(this,arguments)}))],k=!0)},p(e,[o]){(t=e)[5]?C?C.p(t,o):(C=X(t),C.c(),C.m(n,l)):C&&(C.d(1),C=null),t[6]?N?N.p(t,o):(N=Y(t),N.c(),N.m(n,c)):N&&(N.d(1),N=null),t[8]?A&&(L(),P(A,1,1,(()=>{A=null})),R()):A?256&o&&S(A,1):(A=Z(),A.c(),S(A,1),A.m(p,v)),(!b||1&o&&!s(w.src,y=t[0]))&&$(w,"src",y),(!b||2&o)&&$(w,"alt",t[1]),(!b||2&o)&&$(w,"title",t[1]),(!b||256&o)&&_(w,"display",t[8]?"inherit":"none"),t[8]?M?M.p(t,o):(M=tt(t),M.c(),M.m(p,null)):M&&(M.d(1),M=null)},i(t){b||(S(A),b=!0)},o(t){P(A),b=!1},d(e){e&&f(n),C&&C.d(),N&&N.d(),A&&A.d(),t[11](null),M&&M.d(),k=!1,o(E)}}}function ot(t,n,e){let o,{url:i}=n,{caption:r=""}=n,{on_close:l=(()=>{})}=n,{on_prev:c=(()=>{})}=n,{on_next:s=(()=>{})}=n,{show_prev:u=!0}=n,{show_next:a=!0}=n,{pos:f=""}=n,h=!1;return x((()=>{e(9,o.onload=()=>{e(8,h=!0)},o)})),t.$$set=t=>{"url"in t&&e(0,i=t.url),"caption"in t&&e(1,r=t.caption),"on_close"in t&&e(2,l=t.on_close),"on_prev"in t&&e(3,c=t.on_prev),"on_next"in t&&e(4,s=t.on_next),"show_prev"in t&&e(5,u=t.show_prev),"show_next"in t&&e(6,a=t.show_next),"pos"in t&&e(7,f=t.pos)},t.$$.update=()=>{1&t.$$.dirty&&i&&e(8,h=!1)},[i,r,l,c,s,u,a,f,h,o,function(t){"Escape"===t.key?l():"ArrowRight"===t.key?s():"ArrowLeft"===t.key&&c()},function(t){k[t?"unshift":"push"]((()=>{o=t,e(9,o)}))}]}class it extends J{constructor(t){super(),H(this,t,ot,et,r,{url:0,caption:1,on_close:2,on_prev:3,on_next:4,show_prev:5,show_next:6,pos:7})}}function rt(t,n,e){const o=t.slice();return o[19]=n[e],o[21]=e,o}function lt(t){let n,e;return n=new it({props:{url:t[0][t[4]].src,on_close:t[7],on_prev:t[9],on_next:t[10],show_prev:t[4]>0,show_next:t[4]<t[0].length-1,caption:t[0][t[4]].title,pos:t[4]+1+" / "+t[0].length}}),{c(){q(n.$$.fragment)},m(t,o){F(n,t,o),e=!0},p(t,e){const o={};17&e&&(o.url=t[0][t[4]].src),16&e&&(o.on_prev=t[9]),16&e&&(o.on_next=t[10]),16&e&&(o.show_prev=t[4]>0),17&e&&(o.show_next=t[4]<t[0].length-1),17&e&&(o.caption=t[0][t[4]].title),17&e&&(o.pos=t[4]+1+" / "+t[0].length),n.$set(o)},i(t){e||(S(n.$$.fragment,t),e=!0)},o(t){P(n.$$.fragment,t),e=!1},d(t){G(n,t)}}}function ct(t){let n,e;return n=new U({props:{key:t[21],height:t[1],item:t[19],margin:t[2],onClick:function(){return t[11](t[21])}}}),{c(){q(n.$$.fragment)},m(t,o){F(n,t,o),e=!0},p(e,o){t=e;const i={};2&o&&(i.height=t[1]),8&o&&(i.item=t[19]),4&o&&(i.margin=t[2]),n.$set(i)},i(t){e||(S(n.$$.fragment,t),e=!0)},o(t){P(n.$$.fragment,t),e=!1},d(t){G(n,t)}}}function st(t){let n,e,o,i=null!=t[4]&&lt(t),r=t[3],l=[];for(let n=0;n<r.length;n+=1)l[n]=ct(rt(t,r,n));const c=t=>P(l[t],1,1,(()=>{l[t]=null}));return{c(){n=h("div"),i&&i.c(),e=m();for(let t=0;t<l.length;t+=1)l[t].c()},m(r,c){a(r,n,c),i&&i.m(n,null),u(n,e);for(let t=0;t<l.length;t+=1)l[t].m(n,null);t[12](n),o=!0},p(t,[o]){if(null!=t[4]?i?(i.p(t,o),16&o&&S(i,1)):(i=lt(t),i.c(),S(i,1),i.m(n,e)):i&&(L(),P(i,1,1,(()=>{i=null})),R()),78&o){let e;for(r=t[3],e=0;e<r.length;e+=1){const i=rt(t,r,e);l[e]?(l[e].p(i,o),S(l[e],1)):(l[e]=ct(i),l[e].c(),S(l[e],1),l[e].m(n,null))}for(L(),e=r.length;e<l.length;e+=1)c(e);R()}},i(t){if(!o){S(i);for(let t=0;t<r.length;t+=1)S(l[t]);o=!0}},o(t){P(i),l=l.filter(Boolean);for(let t=0;t<l.length;t+=1)P(l[t]);o=!1},d(e){e&&f(n),i&&i.d(),function(t,n){for(let e=0;e<t.length;e+=1)t[e]&&t[e].d(n)}(l,e),t[12](null)}}}function ut(t,n){t.thumbnail_width||console.warn("missing property thumbnail_width for image:",t),t.thumbnail_height||console.warn("missing property thumbnail_height for image:",t),t.scaled_width=Math.floor(n*(t.thumbnail_width/t.thumbnail_height))}function at(t,n,e){let o,i,{images:r=[]}=n,{row_height:l=180}=n,{margin:c=2}=n,s=[],u=0,a=null;var f;x((()=>{i=new ResizeObserver((t=>{t.length>0&&(u=t[0].contentRect.width,h())})),i.observe(o)})),f=()=>{i&&i.disconnect()},y().$$.on_destroy.push(f);const h=function(t,n){let e;return function(){const o=this,i=arguments;clearTimeout(e),e=setTimeout((()=>t.apply(o,i)),n)}}((function(){e(3,s=function(){if(!r)return[];if(0==u)return[];var t=r.slice();for(var n in t)ut(t[n],l);var e=[],o=[];for(;t.length>0;)o.push(d(t));for(var i in o)for(var c in o[i]){var s=o[i][c];e.push(s)}return e}())}),300);function d(t){for(var n=[],e=0,o=2*c;t.length>0&&e<u;){var i=t.shift();n.push(i),e+=i.scaled_width+o}var r=e-u;if(n.length>0&&r>0){var l=function(t,n,e){var o=[],i=0;for(var r in e){var l=e[r].scaled_width/t;o[r]=Math.floor(l*n),i+=o[r]}for(var c=n-i;c>0;)for(r in o)if(o[r]++,--c<0)break;return o}(e,r,n);for(var s in n){var a=l[s];(i=n[s]).margin_left=-Math.abs(Math.floor(a/2)),i.grid_width=i.scaled_width-a}}else for(var f in n)(i=n[f]).margin_left=0,i.grid_width=i.scaled_width;return n}function p(t){t<r.length&&e(4,a=t)}function m(t){t<r.length&&t>=0&&e(4,a=t)}return t.$$set=t=>{"images"in t&&e(0,r=t.images),"row_height"in t&&e(1,l=t.row_height),"margin"in t&&e(2,c=t.margin)},[r,l,c,s,a,o,p,function(){e(4,a=null)},m,()=>m(a-1),()=>m(a+1),t=>p(t),function(t){k[t?"unshift":"push"]((()=>{o=t,e(5,o)}))}]}return class extends J{constructor(t){super(),H(this,t,at,st,r,{images:0,row_height:1,margin:2})}}}();
//# sourceMappingURL=svelte-grid-gallery.js.map
